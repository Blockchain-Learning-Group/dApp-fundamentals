Stage 5: Load Available On-chain Accounts
=========================================

`Video Tutorial <https://drive.google.com/open?id=1hqqMw2Fv7wtqgRKl6TLoAb5go3BOqBkR>`_

1. Get the available accounts from the web3 connection, this is to go beneath the ``getNetwork`` block where the token reference was created, line 35 & 37

.. code-block:: javascript

  this.web3.eth.getAccounts((err, accounts) => {

  });                                             

2. Load the available accounts into the user interface

- Import the Material UI MenuItem, line 12

.. code-block:: javascript

  import MenuItem from 'material-ui/MenuItem';

- Add an availableAccounts arrary into the app's state, line 21

.. code-block:: javascript

  availableAccounts: [],

- Append all accounts into the UI dropdown menu, line 37-44

  .. important:: 

    The code block below is to go within the callback of the ``getAccounts`` call above.

    i.e.

      .. code-block:: javascript

        this.web3.eth.getAccounts((err, accounts) => {
          // Append all available accounts
          for (let i = 0; i < accounts.length; i++) {
            this.setState({
              availableAccounts: this.state.availableAccounts.concat(
                <MenuItem value={i} key={accounts[i]} primaryText={accounts[i]} />
              )
            });
          }
        });

  .. code-block:: javascript

    // Append all available accounts
    for (let i = 0; i < accounts.length; i++) {
      this.setState({
        availableAccounts: this.state.availableAccounts.concat(
          <MenuItem value={i} key={accounts[i]} primaryText={accounts[i]} />
        )
      });
    }

3. Set the default account

- Add a defaultAccount variable to the state, line 22

.. code-block:: javascript

  defaultAccount: 0,

- Set the defaultAccount in the state when the drowdown value changes, line 76

.. code-block:: javascript

  this.setState({ defaultAccount });

- |app02|

  .. |app02| raw:: html

    <a href="https://github.com/Blockchain-Learning-Group/course-resources/blob/master/wallet-template/dev-stages/App.2.js" target="_blank">Complete App.js solution may be found here</a>